#!/bin/sh

## Syntax: makefunclist file

## Parse CAGL declaration functions and generate function list
## and function description templates.

## Takes one argument: the name of the file without suffix
## to output to.

## Outputs two files: docs/$1.txt (a Markdown file) and docs/$1.html,
## generated by pandoc.

set -e

echo Compiling ...
gcc -g -Wall docs/eg_process_docs.c -o bin/eg_process_docs
echo Generating docs/$1.txt ...
./bin/eg_process_docs > docs/$1.txt
echo Generating docs/$1.html ...
pandoc -s -S -c style.css -r markdown docs/$1.txt -N -o docs/$1.html
echo Success
